# ðŸ“š Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒØ§Ù…Ù„ - Agent Evolution

> [!CAUTION]
> **âš ï¸ ØªØ­Ø°ÙŠØ± Ø­Ø§Ø³Ù…: Layer 1 = Measurement ONLY**
> 
> Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠØ¨Ù†ÙŠ **Layer 1** ÙÙ‚Ø· (Ù‚ÙŠØ§Ø³Ø§Øª ÙˆØ¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ù…).
> 
> **Ù…Ù…Ù†ÙˆØ¹ Ø¹Ù„Ù‰ Layer 1:**
> - âŒ Ø§Ù„ØªÙˆØµÙŠØ§Øª (Recommendations)
> - âŒ Ø£Ø­ÙƒØ§Ù… Severity
> - âŒ Ø§Ù„ØªØ±Ø¬ÙŠØ­ Ø¨ÙŠÙ† Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
> - âŒ Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„ØªÙØ³ÙŠØ±ÙŠØ©
> 
> **Layer 2 (Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„)** Ø³ÙŠÙØ¹Ù„ Ø§Ù„ØªÙØ³ÙŠØ±.
> 
> **Ø§Ù„Ù…Ø±Ø¬Ø¹ Ø§Ù„Ø£Ø¹Ù„Ù‰:** [`SYSTEM_CONTRACT.md`](../SYSTEM_CONTRACT.md)

---

## ðŸ—ºï¸ Ø®Ø§Ø±Ø·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚

```
Ø§Ù„Ù…Ø±Ø­Ù„Ø© 0: Ø§Ù„ØªØ­Ø¶ÙŠØ± (1-2 ÙŠÙˆÙ…)
    â”œâ”€â”€ Contracts
    â”œâ”€â”€ Kernel Client  
    â””â”€â”€ Tests Ø£Ø³Ø§Ø³ÙŠØ©

Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Core Agent (3-5 Ø£ÙŠØ§Ù…)
    â”œâ”€â”€ Task System
    â”œâ”€â”€ Facet System
    â”œâ”€â”€ Prompt Builder
    â””â”€â”€ Agent Orchestrator

Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Analysis & Reports (3-4 Ø£ÙŠØ§Ù…)
    â”œâ”€â”€ Response Analyzer
    â”œâ”€â”€ Pattern Detector
    â”œâ”€â”€ Gap Finder
    â””â”€â”€ Report Generator

Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: UI Integration (2-3 Ø£ÙŠØ§Ù…)
    â”œâ”€â”€ Agent Mode ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    â”œâ”€â”€ Task Selector
    â””â”€â”€ Results Display
```

---

## ðŸŽ¯ Quick Start Guide

### **1. Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨:**
1. [00-overview.md](./00-overview.md) - Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©
2. [01-current-state.md](./01-current-state.md) - Ø£ÙŠÙ† Ù†Ø­Ù† Ø§Ù„Ø¢Ù†
3. [02-target-architecture.md](./02-target-architecture.md) - Ø¥Ù„Ù‰ Ø£ÙŠÙ† Ù†Ø°Ù‡Ø¨
4. [03-phase-0-preparation.md](./03-phase-0-preparation.md) - Ø§Ù„Ø¨Ø¯Ø¡

### **2. Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ØªØ¯Ø±ÙŠØ¬ÙŠ:**
- âœ… **Ù„Ø§ ØªØ¨Ø¯Ø£ ÙƒÙ„ Ø´ÙŠØ¡ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©!**
- âœ… Ù†ÙØ° Phase 0 ÙƒØ§Ù…Ù„Ø© Ù‚Ø¨Ù„ Phase 1
- âœ… Ø§Ø®ØªØ¨Ø± ÙƒÙ„ phase Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØªØ§Ù„ÙŠØ©

### **3. Ø§Ù„Ù…Ø¨Ø¯Ø£ Ø§Ù„Ø°Ù‡Ø¨ÙŠ:**
> **Kernel ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ - Ù„Ø§ ØªÙ„Ù…Ø³Ù‡!**

---

## ðŸ“‹ Checklist Ù„ÙƒÙ„ Ù…Ø±Ø­Ù„Ø©

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 0: âœ… Ø§Ù„ØªØ­Ø¶ÙŠØ±**
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ `backend/src/agent/`
- [ ] ÙƒØªØ§Ø¨Ø© Contracts (3 Ù…Ù„ÙØ§Øª)
- [ ] Ø¨Ù†Ø§Ø¡ Kernel Client
- [ ] ÙƒØªØ§Ø¨Ø© Tests Ø£Ø³Ø§Ø³ÙŠØ©
- [ ] Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† Kernel ÙŠØ¹Ù…Ù„

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: âœ… Core Agent**
- [ ] Task Registry  
- [ ] Base Task Class
- [ ] Ø£ÙˆÙ„ Task (js-code-audit)
- [ ] Facet Library (3 facets Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)
- [ ] Prompt Builder
- [ ] Agent Orchestrator (Round 1 ÙÙ‚Ø·)
- [ ] Integration Tests

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: âœ… Analysis & Reports**
- [ ] Response Analyzer
- [ ] Pattern Detector
- [ ] Gap Finder
- [ ] Report Generator
- [ ] Report Templates
- [ ] Round 2 Logic
- [ ] End-to-end Test

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: âœ… UI Integration**
- [ ] Agent Mode Toggle
- [ ] Task Selector UI
- [ ] Progress Indicator
- [ ] Results Display (panels)
- [ ] Report View
- [ ] User Testing

---

## ðŸ—ï¸ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨)

### **1. Contracts** (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 0)
```javascript
// ØªØ¹Ø±ÙŠÙØ§Øª ÙˆØ§Ø¶Ø­Ø©
agent-task.contract.js
kernel-request.contract.js
agent-response.contract.js
```

### **2. Kernel Client** (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 0)
```javascript
// Ø§Ù„Ø¬Ø³Ø± Ø¨ÙŠÙ† Agent Ùˆ Kernel
class KernelClient {
  async send(model, prompt, metadata) {}
  async sendParallel(models, prompt, metadata) {}
}
```

### **3. Task System** (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1)
```javascript
// ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ù‡Ø§Ù…
class BaseTask {
  buildRound1Prompt(facet, input) {}
  buildRound2Prompt(facet, round1, gaps) {}
}

class JSCodeAuditTask extends BaseTask {}
```

### **4. Facet System** (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1)
```javascript
// Ø§Ù„Ø£ÙˆØ¬Ù‡ Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
{
  id: 'security',
  systemPrompt: '...',
  constraints: [...],
  examples: [...]
}
```

### **5. Prompt Builder** (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1)  
```javascript
// Ø¨Ù†Ø§Ø¡ Prompts Ù…Ø¹ Domain Lock
class PromptBuilder {
  build(facet, input, context) {
    return {
      system: facet.systemPrompt,
      user: `${constraints}\n\n${input}`
    };
  }
}
```

### **6. Agent Orchestrator** (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1 & 2)
```javascript
// Ø§Ù„Ù‚Ø§Ø¦Ø¯
class AgentOrchestrator {
  async executeTask(taskConfig, input) {
    // 1. Round 1
    // 2. Analysis
    // 3. Round 2
    // 4. Report
  }
}
```

### **7. Analyzer** (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2)
```javascript
// Ø§Ù„ØªØ­Ù„ÙŠÙ„
class ResponseAnalyzer {
  detectPatterns(responses) {}
  findGaps(responses) {}
  checkContradictions(responses) {}
}
```

### **8. Report Generator** (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2)
```javascript
// Ø¥Ù†ØªØ§Ø¬ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
class ReportGenerator {
  generate(round1, round2, analysis) {
    return markdown;
  }
}
```

---

## ðŸ§ª Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±

### **Unit Tests:**
```javascript
// ÙƒÙ„ component Ù„Ù‡ tests
kernel-client.test.js
task-system.test.js
prompt-builder.test.js
analyzer.test.js
report-generator.test.js
```

### **Integration Tests:**
```javascript
// Agent + Kernel Ù…Ø¹Ø§Ù‹
orchestrator.integration.test.js
```

### **E2E Tests:**
```javascript
// Ø§Ù„Ù†Ø¸Ø§Ù… ÙƒØ§Ù…Ù„Ø§Ù‹
agent-workflow.e2e.test.js
```

---

## ðŸŽ¨ Ù…Ø«Ø§Ù„ Ø¹Ù…Ù„ÙŠ ÙƒØ§Ù…Ù„

### **Scenario: Code Audit**

```javascript
// 1. User Request
POST /api/agent/execute
{
  taskType: 'js-code-audit',
  input: `
    function login(username, password) {
      db.query("SELECT * FROM users WHERE user='" + username + "'");
    }
  `
}

// 2. Agent Orchestrator
const task = TaskRegistry.get('js-code-audit');
const facets = ['security', 'performance', 'quality'];
const models = ['openai', 'gemini', 'deepseek'];

// 3. Round 1 (Parallel)
for (facet of facets) {
  const prompt = PromptBuilder.build(facet, input);
  const responses = await KernelClient.sendParallel(models, prompt);
  // Ø¬Ù…Ø¹ Ø§Ù„Ø±Ø¯ÙˆØ¯
}

// 4. Analysis
const analysis = Analyzer.analyze(allResponses);
/*
{
  patterns: ['SQL Injection (all 3 agree)'],
  gaps: {
    openai: ['Missing XSS check'],
    gemini: ['No input sanitization mentioned']
  },
  confidence: 0.95
}
*/

// 5. Round 2 (Targeted)
for (gap of analysis.gaps) {
  const focusedPrompt = PromptBuilder.buildRound2(gap);
  const response = await KernelClient.send(gap.model, focusedPrompt);
}

// 6. Report
const report = ReportGenerator.generate(round1, round2, analysis);

// 7. Response
{
  status: 'complete',
  report: {
    summary: 'Critical SQL Injection vulnerability found',
    findings: [...],
    recommendations: [...]
  },
  confidence: 0.95
}
```

---

## âš ï¸ Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©

### **âœ… Ø§ÙØ¹Ù„:**
- âœ… Ø§ØªØ¨Ø¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨
- âœ… Ø§Ø®ØªØ¨Ø± ÙƒÙ„ component Ø¨Ø´ÙƒÙ„ Ù…Ù†ÙØµÙ„
- âœ… Ø§Ø³ØªØ®Ø¯Ù… Contracts ÙƒÙ…Ø±Ø¬Ø¹
- âœ… Ø§ÙƒØªØ¨ Tests Ù‚Ø¨Ù„ Ø§Ù„ÙƒÙˆØ¯ (TDD)
- âœ… ÙˆØ«Ù‘Ù‚ Ø£ÙŠ ØªØºÙŠÙŠØ±Ø§Øª

### **âŒ Ù„Ø§ ØªÙØ¹Ù„:**
- âŒ ØªØ¹Ø¯ÙŠÙ„ Kernel Ø§Ù„Ø­Ø§Ù„ÙŠ
- âŒ Ø§Ù„Ù‚ÙØ² Ø¨ÙŠÙ† Ø§Ù„Ù…Ø±Ø§Ø­Ù„
- âŒ ÙƒØªØ§Ø¨Ø© ÙƒÙˆØ¯ Ø¨Ø¯ÙˆÙ† tests
- âŒ ØªØ¬Ø§Ù‡Ù„ Contracts
- âŒ Ø¥Ø¶Ø§ÙØ© features ØºÙŠØ± Ù…Ø®Ø·Ø·Ø©

---

## ðŸ“Š Metrics Ù„Ù„Ù†Ø¬Ø§Ø­

### **Code Quality:**
- Test Coverage > 80%
- No linting errors
- Documentation complete

### **Performance:**
- Round 1: < 30s
- Analysis: < 5s
- Round 2: < 20s
- Report Gen: < 2s
- **Total: < 1 minute**

### **Reliability:**
- Error handling Ø´Ø§Ù…Ù„
- Graceful degradation
- Logging ÙƒØ§ÙÙ

---

## ðŸš€ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚

### **v0.1 (PoC):**
- âœ… Agent ÙŠØ´ØºÙ‘Ù„ task ÙˆØ§Ø­Ø¯
- âœ… Round 1 ÙÙ‚Ø·
- âœ… ØªÙ‚Ø±ÙŠØ± Ø¨Ø³ÙŠØ·

### **v0.2 (MVP):**
- âœ… 3 tasks
- âœ… Round 1 + Round 2
- âœ… Pattern detection
- âœ… ØªÙ‚Ø§Ø±ÙŠØ± markdown

### **v1.0 (Production):**
- âœ… UI integration ÙƒØ§Ù…Ù„Ø©
- âœ… 5+ tasks
- âœ… ØªØ­Ù„ÙŠÙ„ Ù…ØªÙ‚Ø¯Ù…
- âœ… Caching
- âœ… Error recovery

---

## ðŸ“ž Ø§Ù„Ø¯Ø¹Ù…

**Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚:** `docs/agent-evolution/`

**Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©:**
1. **Ù‡Ù„ Ø£Ø­ØªØ§Ø¬ Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ KernelØŸ**  
   âŒ Ù„Ø§! Kernel ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ

2. **Ù‡Ù„ ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Chat Mode Ùˆ Agent Mode Ù…Ø¹Ø§Ù‹ØŸ**  
   âœ… Ù†Ø¹Ù…! ÙƒÙ„Ø§Ù‡Ù…Ø§ ÙŠØ¹Ù…Ù„Ø§Ù† Ø¬Ù†Ø¨Ø§Ù‹ Ø¥Ù„Ù‰ Ø¬Ù†Ø¨

3. **ÙƒÙ… ØªÙƒÙ„ÙØ© API calls ÙÙŠ Agent ModeØŸ**  
   âš ï¸ Ø£Ø¹Ù„Ù‰ Ù…Ù† Chat Mode (3 models Ã— facets)
   
4. **Ù‡Ù„ Agent ÙŠØ¹Ù…Ù„ offlineØŸ**  
   âŒ Ù„Ø§ØŒ ÙŠØ­ØªØ§Ø¬ API keys Ù„Ù„Ù†Ù…Ø§Ø°Ø¬

---

## âœ… Ø§Ù„Ø®Ù„Ø§ØµØ©

Ù‡Ø°Ø§ Ø§Ù„Ø¯Ù„ÙŠÙ„ ÙŠÙˆÙØ±:
- ðŸ“‹ Ø®Ø·Ø© ÙˆØ§Ø¶Ø­Ø© step-by-step
- ðŸ—ï¸ Ø¨Ù†ÙŠØ© Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø³Ù„ÙŠÙ…Ø©
- ðŸ§ª Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© testing Ø´Ø§Ù…Ù„Ø©
- âš ï¸ ØªØ­Ø°ÙŠØ±Ø§Øª Ù…Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
- ðŸš€ Ø·Ø±ÙŠÙ‚ ÙˆØ§Ø¶Ø­ Ù„Ù„Ø¥Ø·Ù„Ø§Ù‚

**Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„Ù…Ø±Ø­Ù„Ø© 0 ÙˆØ§ØªØ¨Ø¹ Ø§Ù„Ø®Ø·Ø©!** ðŸŽ¯

---

**Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©:**
- [Overview](./00-overview.md)
- [Current State](./01-current-state.md)
- [Target Architecture](./02-target-architecture.md)
- [Phase 0](./03-phase-0-preparation.md)
